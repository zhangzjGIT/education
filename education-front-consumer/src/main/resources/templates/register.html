<!DOCTYPE html>
<html>
<head>
		<meta charset="utf-8">
		<title>注册界面</title>
		<link rel="stylesheet" href="../css/reset.css" />
		<link rel="stylesheet" href="../css/common.css" />
		<link rel="stylesheet" href="../css/font-awesome.min.css" />
	</head>
	<body>
		<div class="wrap login_wrap">
			<div class="content">
				
				<div class="logo"></div>
				
				<div class="login_box">	
					
					<div class="login_form">
						<div class="login_title">
							注册
						</div>
						<form action="#" method="post">
							
							<div class="form_text_ipt">
								<input id="userName" type="text" placeholder="用户名">
							</div>
							<div class="ececk_warning"><span>手机号/邮箱不能为空</span></div>
							<div class="form_text_ipt">
								<input id="password" type="password" placeholder="密码">
							</div>
							<div class="ececk_warning"><span>密码不能为空</span></div>
							<div class="form_text_ipt">
								<input id="phoneNumber" type="text" placeholder="手机号">
							</div>
							<div class="ececk_warning"><span>手机号不能为空</span></div>
							<div class="form_text_ipt">
								<input id="numPhone" type="text" placeholder="验证码">
							</div>
							<div class="ececk_warning"><span>验证码不能为空</span></div>
							<div class="form_btn">
								<span
										style="background: rgb(0, 142, 173);cursor:pointer; padding: 7px 10px; border-radius: 4px; border: 1px solid rgb(26, 117, 152); border-image: none; color: rgb(255, 255, 255); font-weight: bold;"
										id="getSMSCodeBtn" >获取验证码</span>
							</div>
							<div class="form_btn">
								<button type="button" id="SMSBtn" onclick="javascript:window.location.href='#'">注册</button>
							</div>
							<div class="form_reg_btn">
								<span>已有帐号？</span><a href="../user/toLogin">马上登录</a>
							</div>
						</form>
						<div class="other_login">
							<div class="left other_left">
								<span>其它登录方式</span>
							</div>
							<div class="right other_right">
								<a href="#"><i class="fa fa-qq fa-2x"></i></a>
								<a href="#"><i class="fa fa-weixin fa-2x"></i></a>
								<a href="#"><i class="fa fa-weibo fa-2x"></i></a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="../js/jquery.min.js" ></script>
		<script type="text/javascript" src="../js/common.js" ></script>
	</body>
<script>
    $('#SMSBtn').click(function(){
        $.ajax({
            url:'../user/adduser',
            type:'post',
            data:{
                userName:$('#userName').val(),
                password:$('#password').val(),
                phoneNumber:$('#phoneNumber').val(),
                numPhone:$('#numPhone').val()
            },
            dataType:'json',
            success:function(result){
                if(result.code == 0){
                    location.href="../user/toLogin"
                }else{
                    $.messager.alert('提示',result.msg,'info')
                }
            }
        })
    })

    $("#getSMSCodeBtn").click(function(){

        $.ajax({
            url:'../user/sendSMS',
            type:'post',
            data:{
                phone:$("#phoneNumber").val()

            },
            dataType:'json',
            success:function(result){
                if(result){
                    $.messager.alert('提示','发送成功','info')
                    getValidated()
                }else{

                    $.messager.alert('提示','发送失败','error')
                }
            },
            error:function(){

                $.messager.alert('提示','失败','error')
            }
        })


    })
    var countdown=60;
    function getValidated() {
        if (countdown == 0) {
            $('#getSMSCodeBtn').html("免费获取验证码")
        } else {
            $('#getSMSCodeBtn').html("重新发送" + countdown + "")
            countdown--;
        }
        setTimeout(function() {
            getValidated()
        },1000)
    }



</script>
</html>
